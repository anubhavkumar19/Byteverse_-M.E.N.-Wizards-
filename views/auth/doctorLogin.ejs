<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Doctor Login</title>
  <link rel="stylesheet" href="/css/navbar.css">
  <link rel="stylesheet" href="/css/doctorLogin.css">
  <link rel="stylesheet" href="/css/flashing.css">
</head>

<body>
  <header class="navbar">
    <div class="welcome-text">PulsePoint</div>
    <nav class="nav-menu">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Gallery</a></li>
        <li><a href="#">Service</a></li>
      </ul>
    </nav>
  </header>


  <% if (locals.messages) { %>
    <% if (messages.success && messages.success.length> 0) { %>
      <div class="flash-toast success">
        <%= messages.success[0] %>
          <span class="close-btn">&times;</span>
      </div>
      <% } %>

        <% if (messages.error && messages.error.length> 0) { %>
          <div class="flash-toast error">
            <%= messages.error[0] %>
              <span class="close-btn">&times;</span>
          </div>
          <% } %>

            <% if (messages.failure && messages.failure.length> 0) { %>
              <div class="flash-toast error">
                <%= messages.failure[0] %>
                  <span class="close-btn">&times;</span>
              </div>
              <% } %>
                <% } %>


                  <main class="form-container">
                    <h1>Doctor Login</h1>
                    <form action="/doctors/login" method="POST">
                      <label>Email</label>
                      <input type="email" name="email" required>

                      <label>Password</label>
                      <input type="password" name="password" required>

                      <button type="submit">Login</button>
                    </form>

                    <h1 style="align-items: center; text-align: center;">OR</h1>
                    <form action="/doctor">
                      <button type="submit">Register</button>
                    </form>
                  </main>


    <%- include("../includes/footer.ejs") %>


                  <script>
                    document.addEventListener('DOMContentLoaded', function () {
                      // Auto-dismiss flash messages after 5 seconds
                      const flashMessages = document.querySelectorAll('.flash-toast');

                      flashMessages.forEach(message => {
                        // Auto-hide after 5 seconds
                        setTimeout(() => {
                          message.style.animation = 'slideOut 0.5s forwards';
                          setTimeout(() => message.remove(), 500);
                        }, 5000);

                        // Manual close button
                        const closeBtn = message.querySelector('.close-btn');
                        if (closeBtn) {
                          closeBtn.addEventListener('click', () => {
                            message.style.animation = 'slideOut 0.5s forwards';
                            setTimeout(() => message.remove(), 500);
                          });
                        }
                      });
                    });
                  </script>
</body>

</html>